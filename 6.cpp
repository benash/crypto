#include <iostream>
#include <gmp.h>
#include <string>
#include <gmpxx.h>

using std::cout;
using std::endl;
using std::string;

int main() {

  mpz_class n, a, x, p, q, c, phi, e, d, m, test;

  n = "179769313486231590772930519078902473361797697894230657273430081157732675805505620686985379449212982959585501387537164015710139858647833778606925583497541085196591615128057575940752635007475935288710823649949940771895617054361149474865046711015101563940680527540071584560878577663743040086340742855278549092581";

  a = sqrt(n) + 1;
  x = sqrt(a * a - n);
  p = a - x;
  q = a + x;

  c = "22096451867410381776306561134883418017410069787892831071731839143676135600120538004282329650473509424343946219751512256465839967942889460764542040581564748988013734864120452325229320176487916666402997509188729971690526083222067771600019329260870009579993724077458967773697817571267229951148662959627934791540";
  phi = (p - 1) * (q - 1);
  e = "65537";
  mpz_invert(d.get_mpz_t(), e.get_mpz_t(), phi.get_mpz_t());

  mpz_powm(m.get_mpz_t(), c.get_mpz_t(), d.get_mpz_t(), phi.get_mpz_t());
  mpz_powm(test.get_mpz_t(), m.get_mpz_t(), e.get_mpz_t(), phi.get_mpz_t());


  cout << m << endl << endl;
  cout << c << endl << endl;
  cout << test << endl << endl;



  return 0;
}

